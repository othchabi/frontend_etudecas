var w=Object.defineProperty,y=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var p=(t,e,r)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_=(t,e)=>{for(var r in e||(e={}))b.call(e,r)&&p(t,r,e[r]);if(h)for(var r of h(e))k.call(e,r)&&p(t,r,e[r]);return t},m=(t,e)=>y(t,$(e));import{a as i}from"./axios.9e3aeb74.js";import{D as C,S,F as D}from"./Filter.935f265c.js";import{_ as P}from"./index.fc511753.js";import{r as c,o as F,a as N,h as o,s as f,t as j,b as l,w as B,p as L,k as R}from"./vendor.63776c49.js";const E={components:{Datagrid:C,Search:S,Filter:D},data(){return{headers:[{text:"Nom",value:"nom"},{text:"Date De Cr\xE9ation",value:"created_at"}],niveau:"",anneeId:this.$route.params.anneeId,niveauId:this.$route.params.niveauId,parcours:[],searchQuery:"",selectedFilter:"",filterOptions:[{text:"Nom",value:"nom"},{text:"Date De Cr\xE9ation",value:"created_at"}]}},methods:{fetchNiveau(){const t=localStorage.getItem("userToken");i.get(`http://localhost:8000/api/annee-universitaire/${this.anneeId}/annee-formation/${this.niveauId}`,{headers:{Authorization:`Bearer ${t}`}}).then(e=>{console.log(e.data),this.niveau=`${e.data.niveau} - ${e.data.annee_universitaire.annee_debut}/${e.data.annee_universitaire.annee_fin}`}).catch(e=>console.error("Erreur lors de la r\xE9cup\xE9ration des parcours de l'ann\xE9e",e))},fetchParcours(){const t=localStorage.getItem("userToken");i.get(`http://localhost:8000/api/annee-universitaire/${this.anneeId}/annee-formation/${this.niveauId}/parcours`,{headers:{Authorization:`Bearer ${t}`}}).then(e=>{console.log(e.data),this.parcours=e.data.map(r=>m(_({},r),{created_at:r.created_at.split("T")[0]}))}).catch(e=>console.error("Erreur lors de la r\xE9cup\xE9ration des parcours de l'ann\xE9e",e))},createFormation(){this.$router.push({name:"CreateParcours",params:{anneeId:this.anneeId}})},handleClick(t){console.log("parcours",t.id)},addRow(t){this.$router.push({name:"ListUEs",params:{formationId:t.id}})},deleteRow(t){if(confirm(`\xCAtes-vous s\xFBr de vouloir supprimer le parcours : ${t.nom}  ?`)){const r=localStorage.getItem("userToken");i.delete(`http://localhost:8000/api/annee-universitaire/${this.anneeId}/annee-formation/${this.niveauId}/parcours/delete/${t.id}`,{headers:{Authorization:`Bearer ${r}`}}).then(()=>{alert("Parcours supprim\xE9e"),this.fetchParcours()}).catch(u=>{console.error("Erreur lors de la suppression du parcours :",u),alert("\xC9chec de la suppression du parcours.")})}}},computed:{filteredRows(){return this.parcours.filter(t=>{const e=this.searchQuery.toLowerCase();return Object.keys(t).some(r=>String(t[r]).toLowerCase().includes(e))})}},created(){this.fetchNiveau(),this.fetchParcours()}},d=t=>(L("data-v-83b1445c"),t=t(),R(),t),T={class:"flex flex-col h-screen"},z={class:"text-center text-5xl font-bold my-4"},A=d(()=>o("br",null,null,-1)),O={class:"flex-1 flex flex-col items-center justify-center"},Q={class:"w-full max-w-6xl px-4"},U={class:"flex justify-between items-center mb-2"},V={class:"flex gap-2"},q={class:"shadow-lg rounded-lg overflow-hidden"},G={class:"flex items-center justify-center space-x-2"},H=["onClick"],J=d(()=>o("span",{class:"material-icons"},"edit",-1)),K=[J],M=["onClick"],W=d(()=>o("span",{class:"material-icons"},"delete",-1)),X=[W];function Y(t,e,r,u,s,n){const v=c("Search"),x=c("Filter"),g=c("Datagrid");return F(),N("div",T,[o("h1",z,[f("Les Parcours du "),A,f(" "+j(this.niveau),1)]),o("main",O,[o("div",Q,[o("div",U,[o("div",V,[l(v,{"onUpdate:query":e[0]||(e[0]=a=>s.searchQuery=a)}),l(x,{options:s.filterOptions,"onUpdate:filter":e[1]||(e[1]=a=>s.selectedFilter=a)},null,8,["options"])]),o("button",{onClick:e[2]||(e[2]=a=>n.createFormation()),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-700 transition duration-150"},"Nouveau Parcours")]),o("div",q,[l(g,{headers:s.headers,rows:n.filteredRows,actions:""},{"row-actions":B(({row:a})=>[o("div",G,[o("button",{onClick:I=>t.editRow(a),class:"flex items-center justify-center p-2 rounded text-gray-500 hover:text-gray-700 transition duration-150"},K,8,H),o("button",{onClick:I=>n.deleteRow(a),class:"flex items-center justify-center p-2 rounded text-gray-500 hover:text-red-500 transition duration-150"},X,8,M)])]),_:1},8,["headers","rows"])])])])])}var ae=P(E,[["render",Y],["__scopeId","data-v-83b1445c"]]);export{ae as default};
