var g=Object.defineProperty,y=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var h=(t,e,s)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,p=(t,e)=>{for(var s in e||(e={}))b.call(e,s)&&h(t,s,e[s]);if(u)for(var s of u(e))k.call(e,s)&&h(t,s,e[s]);return t},m=(t,e)=>y(t,w(e));import{D as C,S,F as U}from"./Filter.935f265c.js";import{a as _}from"./axios.9e3aeb74.js";import{e as I,r as n,o as R,a as T,h as o,b as l,w as F,p as B,k as D}from"./vendor.63776c49.js";import{_ as N}from"./index.fc511753.js";I();const j={components:{Datagrid:C,Search:S,Filter:U},data(){return{searchQuery:"",selectedFilter:"",filterOptions:[{text:"Nom",value:"nom"},{text:"Pr\xE9nom",value:"prenom"},{text:"Nom d'utilisateur",value:"username"},{text:"Email",value:"email"},{text:"R\xF4les",value:"roles"},{text:"Date d'inscription",value:"created_at"}],headers:[{text:"Nom",value:"nom"},{text:"Pr\xE9nom",value:"prenom"},{text:"Nom d'utilisateur",value:"username"},{text:"Email",value:"email"},{text:"R\xF4les",value:"roles"},{text:"Date d'inscription",value:"created_at"}],requests:[]}},computed:{filteredRequests(){return this.requests.filter(t=>this.searchQuery?(this.selectedFilter?t[this.selectedFilter].toString().toLowerCase():t.email.toString().toLowerCase()).includes(this.searchQuery.toLowerCase()):!0)}},methods:{navigateTo(t,e={}){this.$router.push({name:t,params:e})},nameById(t){return{1:"Enseignant",2:"Responsable ann\xE9e",3:"Responsable master",4:"Administrateur"}[t]},fetchAllUsers(){const t=localStorage.getItem("userToken");console.log(t),_.get("http://localhost:8000/api/users",{headers:{Authorization:`Bearer ${t}`}}).then(e=>{this.requests=e.data.map(s=>m(p({},s),{roles:s.roles.map(d=>this.nameById(d.id)).join(", "),inscriptionDate:s.created_at.split("T")[0]})),console.log(this.requests)}).catch(e=>{console.error("There was an error fetching all users:",e)})},deleteRow(t){const e=localStorage.getItem("userToken");console.log(e,t.id),_.delete(`http://localhost:8000/api/user/delete/${t.id}`,{headers:{Authorization:`Bearer ${e}`}}).then(s=>{this.fetchAllUsers()}).catch(s=>{console.error("There was an error deleting the user:",s)})}},created(){this.fetchAllUsers()}},c=t=>(B("data-v-0adf6372"),t=t(),D(),t),q={class:"flex flex-col h-screen"},A=c(()=>o("h1",{class:"text-center text-5xl font-bold my-4"},"Tous Les Utilisateurs",-1)),L={class:"flex-1 flex flex-col items-center justify-center"},E={class:"w-full max-w-6xl px-4"},Q={class:"flex justify-between items-center mb-2"},z={class:"flex gap-2"},M={class:"shadow-lg rounded-lg overflow-hidden"},O={class:"flex items-center justify-center space-x-2"},P=["onClick"],V=c(()=>o("span",{class:"material-icons"},"edit",-1)),$=[V],G=["onClick"],H=c(()=>o("span",{class:"material-icons"},"delete",-1)),J=[H];function K(t,e,s,d,a,i){const f=n("Search"),x=n("Filter"),v=n("Datagrid");return R(),T("div",q,[A,o("main",L,[o("div",E,[o("div",Q,[o("div",z,[l(f,{"onUpdate:query":e[0]||(e[0]=r=>a.searchQuery=r)}),l(x,{options:a.filterOptions,"onUpdate:filter":e[1]||(e[1]=r=>a.selectedFilter=r)},null,8,["options"])]),o("button",{onClick:e[2]||(e[2]=()=>i.navigateTo("CreateUser")),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-700 transition duration-150"},"Nouveau Utilisateur")]),o("div",M,[l(v,{headers:a.headers,rows:i.filteredRequests,actions:""},{"row-actions":F(({row:r})=>[o("div",O,[o("button",{onClick:()=>i.navigateTo("EditUser",{userId:r.id}),class:"flex items-center justify-center p-2 rounded text-gray-500 hover:text-gray-700 transition duration-150"},$,8,P),o("button",{onClick:W=>i.deleteRow(r),class:"flex items-center justify-center p-2 rounded text-gray-500 hover:text-red-500 transition duration-150"},J,8,G)])]),_:1},8,["headers","rows"])])])])])}var se=N(j,[["render",K],["__scopeId","data-v-0adf6372"]]);export{se as default};
