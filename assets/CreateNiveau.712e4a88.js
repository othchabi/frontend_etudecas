var f=Object.defineProperty;var u=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var c=(a,e,t)=>e in a?f(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,m=(a,e)=>{for(var t in e||(e={}))v.call(e,t)&&c(a,t,e[t]);if(u)for(var t of u(e))_.call(e,t)&&c(a,t,e[t]);return a};import{a as h}from"./axios.9e3aeb74.js";import{o as r,a as l,h as o,z as x,x as d,A as p,y as b,F as g,B as N,t as M}from"./vendor.63776c49.js";import{_ as y}from"./index.fc511753.js";const C={data(){return{form:{niveau:"",date_debut:"",base:""},anneeId:this.$route.params.anneeId,maquetteNiveaux:[]}},methods:{fetchMaquettes(){const a="http://localhost:8000/api/annee-formation/maquettes";h.get(a,{params:{niveau:this.form.niveau},headers:{Authorization:`Bearer ${localStorage.getItem("userToken")}`}}).then(e=>{this.maquetteNiveaux=e.data.map(t=>({id:t.id,name:`${t.niveau} - ${t.annee_universitaire.annee_debut}/${t.annee_universitaire.annee_fin}`}))}).catch(e=>{console.error("Erreur lors de la r\xE9cup\xE9ration :",e.response?e.response.data:"Unknown error"),alert("\xC9chec lors de la r\xE9cup\xE9ration. "+(e.response&&e.response.data.message?e.response.data.message:"Error"))})},createFormation(){let a=m({},this.form);a.date_debut===""&&delete a.date_debut,console.log(a);const e=this.form.base===""?`http://localhost:8000/api/annee-universitaire/${this.anneeId}/annee-formation/create`:`http://localhost:8000/api/annee-universitaire/${this.anneeId}/annee-formation/copy/${a.base}`;h.post(e,a,{headers:{Authorization:`Bearer ${localStorage.getItem("userToken")}`}}).then(()=>{this.$router.push({name:"NiveauList"})}).catch(t=>{console.error("Erreur lors de la cr\xE9ation du niveau :",t.response.data),alert("\xC9chec de la cr\xE9ation du niveau. "+t.response.data.message)})},onNiveauChange(){this.fetchMaquettes()}}},w={class:"flex flex-col h-screen"},D=o("h1",{class:"text-center text-5xl font-bold my-4"},"Cr\xE9er une Nouvelle Formation",-1),F={class:"flex-1 flex flex-col items-center justify-center"},k={class:"w-full max-w-6xl px-4"},B={class:"shadow-lg rounded-lg overflow-hidden p-8"},I=o("h2",{class:"text-lg font-semibold"},"Niveau",-1),S=o("option",{value:"",disabled:""},"S\xE9lectionnez le Niveau",-1),q=o("option",{value:"M1"},"M1",-1),z=o("option",{value:"M2"},"M2",-1),E=[S,q,z],U=o("h2",{class:"text-lg font-semibold"},"Date de D\xE9but",-1),V=o("h2",{class:"text-lg font-semibold"},"\xC0 partir d'une maquette",-1),A=o("option",{value:"",disabled:""},"Choisir une ancienne ann\xE9e",-1),T=["value"],$=o("button",{type:"submit",class:"btn"},"Cr\xE9er Formation",-1);function L(a,e,t,j,n,i){return r(),l("div",w,[D,o("main",F,[o("div",k,[o("div",B,[o("form",{onSubmit:e[4]||(e[4]=x((...s)=>i.createFormation&&i.createFormation(...s),["prevent"])),class:"flex flex-col gap-6"},[I,d(o("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.form.niveau=s),required:"",class:"input",onChange:e[1]||(e[1]=(...s)=>i.onNiveauChange&&i.onNiveauChange(...s))},E,544),[[p,n.form.niveau]]),U,d(o("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>n.form.date_debut=s),placeholder:"Date de D\xE9but",class:"input"},null,512),[[b,n.form.date_debut]]),V,d(o("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.form.base=s),class:"input"},[A,(r(!0),l(g,null,N(n.maquetteNiveaux,s=>(r(),l("option",{key:s.id,value:s.id},M(s.name),9,T))),128))],512),[[p,n.form.base]]),$],32)])])])])}var O=y(C,[["render",L]]);export{O as default};
