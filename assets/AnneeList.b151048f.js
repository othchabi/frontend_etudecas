var k=Object.defineProperty,y=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var h=(e,t,s)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_=(e,t)=>{for(var s in t||(t={}))C.call(t,s)&&h(e,s,t[s]);if(u)for(var s of u(t))b.call(t,s)&&h(e,s,t[s]);return e},p=(e,t)=>y(e,A(t));import{a as f}from"./axios.9e3aeb74.js";import{D as S,S as U,F as D}from"./Filter.935f265c.js";import{r as a,o as R,a as I,h as r,b as c,w as j,p as F,k as $,z as m}from"./vendor.63776c49.js";import{_ as B}from"./index.fc511753.js";const L={components:{Datagrid:S,Search:U,Filter:D},data(){return{headers:[{text:"Ann\xE9e Universitaire",value:"annee_universitaire"},{text:"Date de Cr\xE9ation",value:"created_at"}],anneeUniversitaire:[],searchQuery:"",selectedFilter:"",filterOptions:[{text:"Ann\xE9e Universitaire",value:"annee_universitaire"},{text:"Date de Cr\xE9ation",value:"created_at"}]}},methods:{fetchAnneesUniversitaire(){const e=localStorage.getItem("userToken");f.get("http://localhost:8000/api/annee-universitaire",{headers:{Authorization:`Bearer ${e}`}}).then(t=>{console.log(t.data),this.anneeUniversitaire=t.data.map(s=>p(_({},s),{annee_universitaire:`${s.annee_debut}/${s.annee_fin}`,created_at:s.created_at?s.created_at.split("T")[0]:"N/A"}))}).catch(t=>console.error("Erreur lors de la r\xE9cup\xE9ration des formations:",t))},createAnneeUniversitaire(){this.$router.push({name:"CreateAnnee"})},handleClick(e){console.log(e.id),this.$router.push({name:"NiveauList",params:{anneeId:e.id}})},editRow(e){console.log(e.id)},deleteRow(e){if(confirm(`\xCAtes-vous s\xFBr de vouloir supprimer l'annee universitaire :  ${e.annee_universitaire}?`)){const s=localStorage.getItem("userToken");f.delete(`http://localhost:8000/api/annee-universitaire/delete/${e.id}`,{headers:{Authorization:`Bearer ${s}`}}).then(()=>{alert("Ann\xE9e supprimm\xE9e"),this.fetchAnneesUniversitaire()}).catch(d=>{console.error("Erreur lors de la suppression",d),alert("\xC9chec de la suppression.")})}}},computed:{filteredRows(){return this.anneeUniversitaire.filter(e=>{const t=this.searchQuery.toLowerCase();return Object.keys(e).some(s=>String(e[s]).toLowerCase().includes(t))})}},created(){this.fetchAnneesUniversitaire()}},l=e=>(F("data-v-dc9f5cb4"),e=e(),$(),e),N={class:"flex flex-col h-screen"},T=l(()=>r("h1",{class:"text-center text-5xl font-bold my-4"},"Toutes les Ann\xE9es Universitaire : ",-1)),z={class:"flex-1 flex flex-col items-center justify-center"},E={class:"w-full max-w-6xl px-4"},O={class:"flex justify-between items-center mb-2"},Q={class:"flex gap-2"},V={class:"shadow-lg rounded-lg overflow-hidden"},q={class:"flex items-center justify-center space-x-2"},M=["onClick"],G=l(()=>r("span",{class:"material-icons"},"edit",-1)),H=[G],J=["onClick"],K=l(()=>r("span",{class:"material-icons"},"delete",-1)),P=[K];function W(e,t,s,d,i,o){const v=a("Search"),x=a("Filter"),g=a("Datagrid");return R(),I("div",N,[T,r("main",z,[r("div",E,[r("div",O,[r("div",Q,[c(v,{"onUpdate:query":t[0]||(t[0]=n=>i.searchQuery=n)}),c(x,{options:i.filterOptions,"onUpdate:filter":t[1]||(t[1]=n=>i.selectedFilter=n)},null,8,["options"])]),r("button",{onClick:t[2]||(t[2]=n=>o.createAnneeUniversitaire()),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-700 transition duration-150"},"Nouvelle Ann\xE9e Universitaire")]),r("div",V,[c(g,{onClickRow:o.handleClick,headers:i.headers,rows:o.filteredRows,actions:""},{"row-actions":j(({row:n})=>[r("div",q,[r("button",{onClick:m(w=>o.editRow(n),["stop"]),class:"flex items-center justify-center p-2 rounded text-gray-500 hover:text-gray-700 transition duration-150"},H,8,M),r("button",{onClick:m(w=>o.deleteRow(n),["stop"]),class:"flex items-center justify-center p-2 rounded text-gray-500 hover:text-red-500 transition duration-150"},P,8,J)])]),_:1},8,["onClickRow","headers","rows"])])])])])}var se=B(L,[["render",W],["__scopeId","data-v-dc9f5cb4"]]);export{se as default};
