var w=Object.defineProperty,k=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var p=(t,e,o)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,m=(t,e)=>{for(var o in e||(e={}))C.call(e,o)&&p(t,o,e[o]);if(h)for(var o of h(e))b.call(e,o)&&p(t,o,e[o]);return t},_=(t,e)=>k(t,$(e));import{a as i}from"./axios.9e3aeb74.js";import{D as S,S as F,F as U}from"./Filter.935f265c.js";import{r as d,o as R,a as D,h as s,s as f,t as E,b as l,w as G,p as L,k as j,z as v}from"./vendor.63776c49.js";import{_ as B}from"./index.fc511753.js";const N={components:{Datagrid:S,Search:F,Filter:U},data(){return{headers:[{text:"Type",value:"type"},{text:"Num\xE9ro",value:"num\xE9ro"}],nomUe:"",anneeId:this.$route.params.anneeId,ueId:this.$route.params.ueId,niveauId:this.$route.params.niveauId,groupes:[],searchQuery:"",selectedFilter:"",filterOptions:[{text:"Type",value:"type"},{text:"Num\xE9ro",value:"num\xE9ro"}]}},methods:{fetchUE(){const t=localStorage.getItem("userToken");i.get(`http://localhost:8000/api/annee-universitaire/${this.anneeId}/annee-formation/${this.niveauId}/ues/${this.ueId}`,{headers:{Authorization:`Bearer ${t}`}}).then(e=>{console.log(e.data),this.nomUe=e.data.nom}).catch(e=>console.error("Erreur lors de la r\xE9cup\xE9ration des niveaux de l'ann\xE9e",e))},fetchGroupes(){console.log(this.anneeId);const t=localStorage.getItem("userToken");i.get(`http://localhost:8000/api/annee-universitaire/${this.anneeId}/annee-formation/${this.niveauId}/ues/${this.ueId}/groupes`,{headers:{Authorization:`Bearer ${t}`}}).then(e=>{console.log(e.data),this.groupes=e.data.map(o=>_(m({},o),{type:o.type.toUpperCase()}))}).catch(e=>console.error("Erreur lors de la r\xE9cup\xE9ration des groupes de l'ue",e))},createFormation(){this.$router.push({name:"CreateGroupe",params:{anneeId:this.anneeId}})},handleClick(t){this.$router.push({name:"UEList",params:{formationId:this.anneeId,niveauId:t.id}})},addRow(t){this.$router.push({name:"ParcoursList",params:{formationId:this.anneeId,niveauId:t.id}})},deleteRow(t){if(confirm(`\xCAtes-vous s\xFBr de vouloir supprimer le groupe : ${t.niveau}  ?`)){const o=localStorage.getItem("userToken");i.delete(`http://localhost:8000/api/annee-universitaire/${this.anneeId}/annee-formation/${this.niveauId}/ues/${this.ueId}/groupes/delete/${t.id}`,{headers:{Authorization:`Bearer ${o}`}}).then(()=>{alert("Groupe supprim\xE9e"),this.fetchFormations()}).catch(u=>{console.error("Erreur lors de la suppression du groupe :",u),alert("\xC9chec de la suppression du groupe.")})}}},computed:{filteredRows(){return this.groupes.filter(t=>{const e=this.searchQuery.toLowerCase();return Object.keys(t).some(o=>String(t[o]).toLowerCase().includes(e))})}},created(){this.fetchUE(),this.fetchGroupes()}},c=t=>(L("data-v-6c027233"),t=t(),j(),t),T={class:"flex flex-col h-screen"},z={class:"text-center text-5xl font-bold my-4"},A=c(()=>s("br",null,null,-1)),O={class:"flex-1 flex flex-col items-center justify-center"},Q={class:"w-full max-w-6xl px-4"},V={class:"flex justify-between items-center mb-2"},q={class:"flex gap-2"},M={class:"shadow-lg rounded-lg overflow-hidden"},P={class:"flex items-center justify-center space-x-2"},H=["onClick"],J=c(()=>s("span",{class:"material-icons"},"edit",-1)),K=[J],W=["onClick"],X=c(()=>s("span",{class:"material-icons"},"delete",-1)),Y=[X];function Z(t,e,o,u,n,a){const g=d("Search"),x=d("Filter"),I=d("Datagrid");return R(),D("div",T,[s("h1",z,[f("Les groupes de l'ue "),A,f(" "+E(this.nomUe),1)]),s("main",O,[s("div",Q,[s("div",V,[s("div",q,[l(g,{"onUpdate:query":e[0]||(e[0]=r=>n.searchQuery=r)}),l(x,{options:n.filterOptions,"onUpdate:filter":e[1]||(e[1]=r=>n.selectedFilter=r)},null,8,["options"])]),s("button",{onClick:e[2]||(e[2]=r=>a.createFormation()),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-700 transition duration-150"},"Nouveau Groupe")]),s("div",M,[l(I,{onClickRow:a.handleClick,headers:n.headers,rows:a.filteredRows,actions:""},{"row-actions":G(({row:r})=>[s("div",P,[s("button",{onClick:v(y=>t.editRow(r),["stop"]),class:"flex items-center justify-center p-2 rounded text-gray-500 hover:text-gray-700 transition duration-150"},K,8,H),s("button",{onClick:v(y=>a.deleteRow(r),["stop"]),class:"flex items-center justify-center p-2 rounded text-gray-500 hover:text-red-500 transition duration-150"},Y,8,W)])]),_:1},8,["onClickRow","headers","rows"])])])])])}var ne=B(N,[["render",Z],["__scopeId","data-v-6c027233"]]);export{ne as default};
